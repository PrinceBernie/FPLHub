# ============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env.production and fill in your production values
# DO NOT commit this file with real credentials to version control

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
NODE_ENV=production
PORT=5000
HOST=0.0.0.0
TRUST_PROXY=true
DOMAIN_NAME=yourdomain.com

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DATABASE_URL=postgresql://username:password@localhost:5432/fpl_hub_prod
DATABASE_PROVIDER=postgresql
DB_LOGGING=false
DB_SSL=true
DB_SSL_CA=/path/to/ca-certificate.pem
DB_SSL_CERT=/path/to/client-certificate.pem
DB_SSL_KEY=/path/to/client-key.pem

# Database connection pooling
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_ACQUIRE_TIMEOUT=60000
DB_CREATE_TIMEOUT=30000
DB_DESTROY_TIMEOUT=5000
DB_IDLE_TIMEOUT=30000
DB_REAP_INTERVAL=1000
DB_CREATE_RETRY_INTERVAL=200
DB_STATEMENT_TIMEOUT=30000
DB_IDLE_TRANSACTION_TIMEOUT=60000

# ============================================================================
# JWT CONFIGURATION
# ============================================================================
JWT_SECRET=your-super-secure-jwt-secret-key-here
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX_REQUESTS=5
OTP_RATE_LIMIT_MAX_REQUESTS=3
ADMIN_RATE_LIMIT_MAX_REQUESTS=50

# Speed limiting
SPEED_LIMIT_DELAY_AFTER=50
SPEED_LIMIT_DELAY_MS=500

# CORS
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
LOG_LEVEL=info
LOG_FILE_PATH=./logs
LOG_MAX_SIZE=20m
LOG_MAX_FILES=14

# ============================================================================
# REDIS CONFIGURATION (Optional)
# ============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0

# ============================================================================
# FPL API CONFIGURATION
# ============================================================================
FPL_API_BASE_URL=https://fantasy.premierleague.com/api
FPL_API_TIMEOUT=10000
FPL_API_RETRY_ATTEMPTS=3

# ============================================================================
# SMS SERVICE CONFIGURATION (Optional)
# ============================================================================
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# ============================================================================
# EMAIL SERVICE CONFIGURATION (Optional)
# ============================================================================
EMAIL_PROVIDER=smtp
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# ============================================================================
# FILE UPLOAD CONFIGURATION
# ============================================================================
UPLOAD_MAX_SIZE=10mb
UPLOAD_PATH=./uploads
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# ============================================================================
# SESSION CONFIGURATION
# ============================================================================
SESSION_SECRET=your-session-secret-key-here
SESSION_MAX_AGE=86400000
SESSION_HTTP_ONLY=true
SESSION_SECURE=true
SESSION_SAME_SITE=strict

# ============================================================================
# MAINTENANCE MODE
# ============================================================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.

# ============================================================================
# PERFORMANCE CONFIGURATION
# ============================================================================
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6
CACHE_CONTROL_ENABLED=true
STATIC_CACHE_MAX_AGE=31536000

# ============================================================================
# SSL/HTTPS CONFIGURATION
# ============================================================================
# Let's Encrypt (Recommended for production)
LETS_ENCRYPT_ENABLED=true
LETS_ENCRYPT_EMAIL=admin@yourdomain.com
LETS_ENCRYPT_STAGING=false
LETS_ENCRYPT_CERT_PATH=/etc/letsencrypt/live
LETS_ENCRYPT_KEY_PATH=/etc/letsencrypt/live

# Manual SSL (Alternative)
MANUAL_SSL_ENABLED=false
SSL_CERT_PATH=/path/to/ssl-certificate.pem
SSL_KEY_PATH=/path/to/ssl-private-key.pem
SSL_CA_PATH=/path/to/ca-bundle.pem

# Development SSL
SELF_SIGNED_SSL=false

# ============================================================================
# LOAD BALANCER CONFIGURATION
# ============================================================================
# Cluster configuration
CLUSTER_ENABLED=true
CLUSTER_WORKERS=4
CLUSTER_STRATEGY=round-robin
CLUSTER_HEALTH_CHECK=true
CLUSTER_HEALTH_CHECK_INTERVAL=30000
CLUSTER_HEALTH_CHECK_TIMEOUT=5000
CLUSTER_UNHEALTHY_THRESHOLD=3
CLUSTER_HEALTHY_THRESHOLD=2

# Nginx configuration
NGINX_ENABLED=true
NGINX_UPSTREAM_NAME=fpl_hub_backend
NGINX_LOAD_BALANCING_STRATEGY=least_conn
NGINX_KEEPALIVE=32
NGINX_MAX_FAILS=3
NGINX_FAIL_TIMEOUT=30
NGINX_SSL_ENABLED=true
NGINX_SSL_CERT_PATH=/etc/ssl/certs/yourdomain.com.crt
NGINX_SSL_KEY_PATH=/etc/ssl/private/yourdomain.com.key
NGINX_SSL_DHPARAM_PATH=/etc/ssl/dhparam.pem
NGINX_RATE_LIMITING=true
NGINX_RATE_LIMIT_ZONE=api
NGINX_RATE_LIMIT_RATE=10r/s
NGINX_RATE_LIMIT_BURST=20

# HAProxy configuration (Alternative to Nginx)
HAPROXY_ENABLED=false
HAPROXY_STATS_ENABLED=true
HAPROXY_STATS_PORT=8404
HAPROXY_STATS_USERNAME=admin
HAPROXY_STATS_PASSWORD=your-haproxy-stats-password
HAPROXY_HEALTH_CHECK_METHOD=httpchk
HAPROXY_HEALTH_CHECK_URI=/health
HAPROXY_HEALTH_CHECK_INTERVAL=2000
HAPROXY_HEALTH_CHECK_TIMEOUT=1000

# Application-level load balancing
STICKY_SESSIONS=true
SESSION_AFFINITY=ip
HEALTH_CHECK_ENDPOINT=/health
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60000
CIRCUIT_BREAKER_MONITORING_PERIOD=60000

# ============================================================================
# CDN CONFIGURATION
# ============================================================================
CDN_PROVIDER=aws-cloudfront
CDN_STATIC_ASSETS=true
CDN_API_CACHING=true
CDN_MEDIA_CACHING=true
CDN_INVALIDATION_ENABLED=true
CDN_AUTOMATIC_INVALIDATION=true
CDN_INVALIDATION_BATCH_SIZE=100
CDN_INVALIDATION_DELAY=5000
CDN_MONITORING_ENABLED=true
CDN_ALERTS_ENABLED=true
CDN_HIT_RATE_THRESHOLD=0.8
CDN_ERROR_RATE_THRESHOLD=0.05
CDN_LATENCY_THRESHOLD=1000

# AWS CloudFront
AWS_CLOUDFRONT_ENABLED=true
AWS_CLOUDFRONT_DISTRIBUTION_ID=your-distribution-id
AWS_CLOUDFRONT_DOMAIN_NAME=your-cdn-domain.cloudfront.net
AWS_CLOUDFRONT_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_S3_BUCKET=your-s3-bucket
AWS_S3_REGION=us-east-1
AWS_CLOUDFRONT_CACHE_TTL=86400
AWS_CLOUDFRONT_MIN_TTL=0
AWS_CLOUDFRONT_MAX_TTL=31536000
AWS_CLOUDFRONT_DEFAULT_TTL=86400

# Cloudflare
CLOUDFLARE_ENABLED=false
CLOUDFLARE_ZONE_ID=your-zone-id
CLOUDFLARE_API_TOKEN=your-api-token
CLOUDFLARE_DOMAIN=yourdomain.com
CLOUDFLARE_CACHE_LEVEL=aggressive
CLOUDFLARE_MINIFY_CSS=true
CLOUDFLARE_MINIFY_JS=true
CLOUDFLARE_MINIFY_HTML=true
CLOUDFLARE_ROCKET_LOADER=true
CLOUDFLARE_AUTO_MINIFY=true

# Azure CDN
AZURE_CDN_ENABLED=false
AZURE_SUBSCRIPTION_ID=your-subscription-id
AZURE_RESOURCE_GROUP=your-resource-group
AZURE_CDN_PROFILE_NAME=your-cdn-profile
AZURE_CDN_ENDPOINT_NAME=your-cdn-endpoint
AZURE_CLIENT_ID=your-client-id
AZURE_CLIENT_SECRET=your-client-secret
AZURE_TENANT_ID=your-tenant-id
AZURE_STORAGE_ACCOUNT=your-storage-account
AZURE_STORAGE_KEY=your-storage-key

# Google Cloud CDN
GOOGLE_CLOUD_CDN_ENABLED=false
GOOGLE_CLOUD_PROJECT_ID=your-project-id
GOOGLE_CLOUD_BUCKET_NAME=your-bucket-name
GOOGLE_CLOUD_SERVICE_ACCOUNT_KEY=/path/to/service-account-key.json
GOOGLE_CLOUD_LOAD_BALANCER_NAME=your-load-balancer
GOOGLE_CLOUD_BACKEND_BUCKET_NAME=your-backend-bucket

# CDN Asset Configuration
CDN_STATIC_CACHE_CONTROL=public, max-age=31536000, immutable
CDN_STATIC_COMPRESSION=true
CDN_STATIC_MINIFICATION=true
CDN_API_CACHE_CONTROL=public, max-age=3600, s-maxage=3600
CDN_API_VARY=Accept-Encoding, Accept-Language
CDN_API_MAX_AGE=3600
CDN_MEDIA_CACHE_CONTROL=public, max-age=604800, s-maxage=604800
CDN_MEDIA_OPTIMIZATION=true
CDN_MEDIA_QUALITY=85
CDN_MEDIA_RESPONSIVE=true

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================
BACKUP_DATABASE=true
BACKUP_DATABASE_SCHEDULE=0 2 * * *
BACKUP_DATABASE_COMPRESSION=true
BACKUP_DATABASE_ENCRYPTION=true
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key
BACKUP_INCLUDE_SCHEMA=true
BACKUP_INCLUDE_DATA=true

BACKUP_FILES=true
BACKUP_FILES_SCHEDULE=0 3 * * *
BACKUP_FILE_PATHS=./uploads,./logs,./certs,./config
BACKUP_FILE_EXCLUDE=node_modules,.git,*.tmp,*.log
BACKUP_FILES_COMPRESSION=true
BACKUP_FILES_ENCRYPTION=true

BACKUP_CLOUD_ENABLED=true
BACKUP_CLOUD_PROVIDER=aws-s3

# AWS S3 Backup
AWS_S3_BACKUP_ENABLED=true
AWS_S3_BACKUP_BUCKET=your-backup-bucket
AWS_S3_BACKUP_REGION=us-east-1
AWS_S3_BACKUP_PATH=backups
AWS_S3_LIFECYCLE_ENABLED=true
AWS_S3_TRANSITION_DAYS=30
AWS_S3_EXPIRATION_DAYS=365

# Google Cloud Backup
GOOGLE_CLOUD_BACKUP_ENABLED=false
GOOGLE_CLOUD_BACKUP_BUCKET=your-backup-bucket
GOOGLE_CLOUD_PROJECT_ID=your-project-id
GOOGLE_CLOUD_SERVICE_ACCOUNT_KEY=/path/to/service-account-key.json
GOOGLE_CLOUD_LIFECYCLE_ENABLED=true
GOOGLE_CLOUD_AGE_DAYS=365

# Azure Blob Backup
AZURE_BLOB_BACKUP_ENABLED=false
AZURE_BLOB_ACCOUNT_NAME=your-storage-account
AZURE_BLOB_ACCOUNT_KEY=your-storage-key
AZURE_BLOB_CONTAINER=your-container
AZURE_BLOB_BACKUP_PATH=backups

# Local Backup
BACKUP_LOCAL_ENABLED=true
BACKUP_LOCAL_PATH=./backups
BACKUP_LOCAL_MAX_SIZE=10GB
BACKUP_LOCAL_CLEANUP=true

# Backup Retention
BACKUP_RETENTION_DAILY=7
BACKUP_RETENTION_WEEKLY=4
BACKUP_RETENTION_MONTHLY=12

# Backup Notifications
BACKUP_NOTIFICATIONS=true
BACKUP_EMAIL_NOTIFICATIONS=true
BACKUP_SMTP_HOST=smtp.gmail.com
BACKUP_SMTP_PORT=587
BACKUP_SMTP_SECURE=false
BACKUP_SMTP_USER=your-email@gmail.com
BACKUP_SMTP_PASS=your-app-password
BACKUP_EMAIL_RECIPIENTS=admin@yourdomain.com,backup@yourdomain.com
BACKUP_EMAIL_SUBJECT=FPL Hub Backup Report

BACKUP_SLACK_NOTIFICATIONS=false
BACKUP_SLACK_WEBHOOK_URL=your-slack-webhook-url
BACKUP_SLACK_CHANNEL=#backups

# Backup Monitoring
BACKUP_MONITORING=true
BACKUP_HEALTH_CHECK_ENDPOINT=/health/backup
BACKUP_METRICS=true
BACKUP_METRICS_RETENTION=30

# ============================================================================
# API VERSIONING
# ============================================================================
API_VERSION=v1
API_VERSION_HEADER=X-API-Version
